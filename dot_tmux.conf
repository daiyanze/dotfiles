###############
# Keybindings #
###############

# Prefix: from 'C-b' to 'C-a'
unbind C-b
set-option -g prefix C-f
bind-key C-f send-prefix

# Switch panes: Alt-arrows
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Toggle synchronize-panes: [Prefix] a
bind a setw synchronize-panes

##############
# Mouse Mode #
##############

# Enalbe mouse select & resize 
set -g mouse on

# This setting can also be done 1 by 1
### Mouse select for windows & panes
# set -g mouse-select-window on
# set -g mouse-select-pane on
### Mouse resize for panes
# set -g mouse-resize-pane on

##################
# Plugin manager #
##################

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-sessionist'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-yank'
# set -g @plugin 'egel/tmux-gruvbox'
# set -g @plugin 'catppuccin/tmux'
set -g @plugin 'hallazzang/tmux-reset'
set -g @plugin 'nhdaly/tmux-better-mouse-mode'

# Automatic restore sessions
set -g @continuum-restore 'on'

# Initialize plugins
run '~/.tmux/plugins/tpm/tpm'
run '~/.tmux/plugins/tmux-better-mouse-mode/scroll_copy_mode.tmux'

##############
# Appearance #
##############

# Set default terminal to enable italic font support
set -g default-terminal "xterm-256color"

# # Set theme to gruvbox
# # set -g @tmux-gruvbox 'dark'
#
# # Display Sync when panes are synchronized


#-------------------------------------------------------------------------------
#  Status Bar
#-------------------------------------------------------------------------------

# Toggle status bar
bind-key b set-option status


### Colors
INACTIVE_FG_COLOR=color243
ACTIVE_FG_COLOR=terminal
COLOR_FG_WORKSPACE=yellow
COLOR_FG_PREFIX=terminal
COLOR_BG_PREFIX=green
COLOR_FG_SYNC=terminal
COLOR_BG_SYNC=yellow
COLOR_FG_HOST=color243

### Icons
ICON_WORKSPACE='⧉'
ICON_PREFIX=''
ICON_SYNC='󰓦'
ICON_HOST='󰍹'

set-option -g status on
set-option -g status-position bottom
set-option -g status-style fg=terminal
set-option -g status-style bg=terminal
set-option -g status-justify left
set-option -g status-interval 1

# NOTE: these use nested conditionals and "," and "}" must be escaped
search_icon="#{?window_active,#{?window_zoomed_flag,#[fg=blue],},} "
status_items="#[default]#{?window_bell_flag,#[fg=red] ,} $search_icon"

ram="#[bold,italics]RAM: #{ram_fg_color}#{ram_icon}"

set -g status-left-length  200
set -g status-right-length 100
# Options -> ⧉ ❐

# ---------------- Status left -------------------
set -g status-left "\
#{?client_prefix,\
#[fg=$COLOR_FG_WORKSPACE bold] $ICON_WORKSPACE #S #[fg=$COLOR_FG_PREFIX bg=$COLOR_BG_PREFIX bold] $ICON_PREFIX,\
#[fg=#e5c07b bold] $ICON_WORKSPACE #S   } "

# ---------------- End of Status left -------------------

# ---------------- Status right -------------------
set -g status-right "\
#{?pane_synchronized,\
#[fg=$COLOR_FG_SYNC bg=$COLOR_BG_SYNC] $ICON_SYNC #[fg=$COLOR_FG_HOST bg=terminal bold] $ICON_HOST #h,\
#[fg=$COLOR_FG_HOST bold] $ICON_HOST #h} "
# ---------------- End of Status right -------------------

set-window-option -g window-status-style fg=$INACTIVE_FG_COLOR
set-window-option -g window-status-current-style fg=white
set-window-option -g window-status-current-format " #I. #[bold,italics]#W $status_items"
set-window-option -g window-status-format " #I. #[italics]#W $status_items"
set-window-option -g window-status-activity-style none # defaults to reverse
set-window-option -g window-status-separator "#[fg=$INACTIVE_FG_COLOR]"

# tmux commandline styling
set-option -g message-style fg=yellow,bg=terminal,bold
# styling when in command mode i.e. vi or emacs mode in tmux command line
set-option -g message-command-style fg=green,bg=terminal,bold,blink
# styling for the search indicator
set-option -g mode-style bg=terminal,fg=brightgreen,bold

#-------------------------------------------------------------------------------
#  Pane border
#-------------------------------------------------------------------------------
set-option        -g pane-active-border-style fg=gold
# set-option        -g pane-border-style        fg=darkgrey
